{"version":3,"sources":["app.js"],"names":["pagina","contenedorServicios","document","querySelector","cita","nombreCliente","fecha","hora","servicios","addEventListener","iniciarFunciones","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","horaCita","DeshabilitarFechasAnteriores","fetch","then","res","Promise","resolve","reject","json","forEach","serv","id","nombre","precio","servicio","createElement","titulo","costo","textContent","classList","add","dataset","idServicio","onclick","seleccionarServicio","appendChild","catch","console","log","e","elemento","target","tagName","parentElement","toggle","contains","servicioObj","parseInt","firstElementChild","lastElementChild","agregarServicio","eliminarServicio","seccionAnterior","remove","tabActivo","querySelectorAll","pag","preventDefault","paso","contenedorTres","innerHTML","Object","values","includes","serviciosIncompletos","heading","servicioCita","headingServicios","totalPagar","cantidad","contenedorServicio","nombreServicio","precioServicio","totalServicio","split","trim","objeto","filter","valor","value","length","mostrarAlerta","alerta","fechaInput","dia","Date","getUTCDay","fechaAhora","year","getFullYear","mes","getMonth","fechaDeshabilitar","getDate","min","mensaje","error","formulario","setTimeout"],"mappings":"AAAA,IAAAA,OAAA,EACA,MAAAC,oBAAAC,SAAAC,cAAA,yBAEAC,KAAA,CACAC,cAAA,GACAC,MAAA,GACAC,KAAA,GACAC,UAAA,IAGAN,SAAAO,iBAAA,mBAAA,KACAC,qBAGA,MAAAA,iBAAA,KACAC,mBACAC,iBACAC,iBACAC,kBACAC,iBACAC,mBACAC,iBACAC,aACAC,YACAC,WACAC,gCAGAV,iBAAA,KACAW,MAAA,wBACAC,KAAAC,GAAAA,EAAAC,QAAAC,QAAAF,GAAAC,QAAAE,OAAAH,IACAD,KAAAC,GAAAA,EAAAI,QACAL,KAAAC,GAAAA,EAAAhB,UAAAqB,QAAAC,IACA,MAAAC,GAAAA,EAAAC,OAAAA,EAAAC,OAAAA,GAAAH,EAEAI,EAAAhC,SAAAiC,cAAA,OACAC,EAAAlC,SAAAiC,cAAA,MACAE,EAAAnC,SAAAiC,cAAA,KAEAC,EAAAE,YAAAN,EACAK,EAAAC,YAAA,MAAAL,EAEAC,EAAAK,UAAAC,IAAA,aACAN,EAAAO,QAAAC,WAAAX,EACAK,EAAAG,UAAAC,IAAA,qBACAH,EAAAE,UAAAC,IAAA,qBAEAN,EAAAS,QAAAC,oBAIAV,EAAAW,YAAAT,GACAF,EAAAW,YAAAR,GAEApC,oBAAA4C,YAAAX,MAIAY,MAAAtB,GAAAuB,QAAAC,IAAAxB,KAGAoB,oBAAAK,IACA,IAAAC,EAOA,GALAA,EAAA,MAAAD,EAAAE,OAAAC,SAAA,OAAAH,EAAAE,OAAAC,QAAAH,EAAAE,OAAAE,cACAJ,EAAAE,OAEAD,EAAAX,UAAAe,OAAA,gBAEAJ,EAAAX,UAAAgB,SAAA,gBAAA,CACA,MAAAC,EAAA,CACAzB,GAAA0B,SAAAP,EAAAT,QAAAC,YACAV,OAAAkB,EAAAQ,kBAAApB,YACAL,OAAAiB,EAAAS,iBAAArB,aAGAsB,gBAAAJ,OAEA,CACA,MAAAzB,EAAA0B,SAAAP,EAAAT,QAAAC,YAEAmB,iBAAA9B,KAIAnB,eAAA,KAEA,MAAAkD,EAAA5D,SAAAC,cAAA,oBAEA2D,GAAAA,EAAAvB,UAAAwB,OAAA,mBAGA7D,SAAAC,cAAA,QAAAH,QACAuC,UAAAC,IAAA,mBAEA,MAAAwB,EAAA9D,SAAAC,cAAA,6BAEA6D,GAAAA,EAAAzB,UAAAwB,OAAA,UAEA7D,SAAAC,cAAA,eAAAH,YACAuC,UAAAC,IAAA,WAGA3B,eAAA,KACAX,SAAA+D,iBAAA,eAEApC,QAAAqC,IACAA,EAAAzD,iBAAA,QAAAwC,IACAA,EAAAkB,iBACAnE,OAAAyD,SAAAR,EAAAE,OAAAV,QAAA2B,MACArB,QAAAC,IAAAhD,QACAY,iBAGA,MAAAG,EAAAb,SAAAC,cAAA,aACAW,EAAAZ,SAAAC,cAAA,cAEA,IAAAH,OACAe,EAAAwB,UAAAC,IAAA,WAEA,IAAAxC,QACAc,EAAAyB,UAAAC,IAAA,WACAzB,EAAAwB,UAAAwB,OAAA,aAGAhD,EAAAwB,UAAAwB,OAAA,WACAjD,EAAAyB,UAAAwB,OAAA,iBAMAjD,gBAAA,KACAZ,SAAAC,cAAA,cACAM,iBAAA,QAAAwC,IACAjD,SACA+C,QAAAC,IAAAhD,QACAgB,sBAIAD,eAAA,KACAb,SAAAC,cAAA,aACAM,iBAAA,QAAA,KACAT,SACAgB,sBAIAA,iBAAA,KACA,MAAAD,EAAAb,SAAAC,cAAA,aACAW,EAAAZ,SAAAC,cAAA,cAEA,IAAAH,OACAe,EAAAwB,UAAAC,IAAA,WAEA,IAAAxC,QACAe,EAAAwB,UAAAwB,OAAA,WACAjD,EAAAyB,UAAAwB,OAAA,YAEA,IAAA/D,SACAc,EAAAyB,UAAAC,IAAA,WACAvB,kBAIAL,kBAIAK,eAAA,KACA,MAAAZ,cAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAAC,UAAAA,GAAAJ,KACAiE,EAAAnE,SAAAC,cAAA,UAIA,GAFAkE,EAAAC,UAAA,GAEAC,OAAAC,OAAApE,MAAAqE,SAAA,IAAA,CACA,MAAAC,EAAAxE,SAAAiC,cAAA,KACAuC,EAAApC,YAAA,4BACAoC,EAAAnC,UAAAC,IAAA,SACA6B,EAAAxB,YAAA6B,OAEA,CACA,MAAAC,EAAAzE,SAAAiC,cAAA,MACAH,EAAA9B,SAAAiC,cAAA,KACAhB,EAAAjB,SAAAiC,cAAA,KACAf,EAAAlB,SAAAiC,cAAA,KACAyC,EAAA1E,SAAAiC,cAAA,OACA0C,EAAA3E,SAAAiC,cAAA,MACA2C,EAAA5E,SAAAiC,cAAA,KAEAwC,EAAArC,YAAA,kBACAN,EAAAsC,UAAA,qBAAAjE,WACAc,EAAAmD,UAAA,iCAAAhE,WACAc,EAAAkD,UAAA,gCAAA/D,WACAsE,EAAAvC,YAAA,2BACA,IAAAyC,EAAA,EAEAvE,EAAAqB,QAAAoB,IACA,MAAA+B,EAAA9E,SAAAiC,cAAA,OACA6C,EAAAzC,UAAAC,IAAA,uBACA,MAAAyC,EAAA/E,SAAAiC,cAAA,KACA+C,EAAAhF,SAAAiC,cAAA,KAEA8C,EAAA3C,YAAAW,EAAAjB,OACAkD,EAAA5C,YAAAW,EAAAhB,OACAiD,EAAA3C,UAAAC,IAAA,aAEA,MAAA2C,EAAAlC,EAAAhB,OAAAmD,MAAA,KAEAL,GAAAtB,SAAA0B,EAAA,GAAAE,QAEAL,EAAAnC,YAAAoC,GACAD,EAAAnC,YAAAqC,GAEAN,EAAA/B,YAAAmC,GACAF,EAAAR,UAAA,wBAAAS,aAEAhC,QAAAC,IAAA+B,GACA/C,EAAAO,UAAAC,IAAA,kBACArB,EAAAoB,UAAAC,IAAA,kBACApB,EAAAmB,UAAAC,IAAA,kBACAsC,EAAAvC,UAAAC,IAAA,SAGA6B,EAAAxB,YAAA8B,GACAN,EAAAxB,YAAAb,GACAqC,EAAAxB,YAAA1B,GACAkD,EAAAxB,YAAAzB,GACAiD,EAAAxB,YAAAgC,GACAR,EAAAxB,YAAA+B,GACAP,EAAAxB,YAAAiC,KAIAlB,gBAAA0B,IACA,MAAA9E,UAAAA,GAAAJ,KAEAA,KAAAI,UAAA,IAAAA,EAAA8E,GAEAvC,QAAAC,IAAA5C,OAGAyD,iBAAA9B,IACA,MAAAvB,UAAAA,GAAAJ,KACAA,KAAAI,UAAAA,EAAA+E,OAAAtC,GAAAA,EAAAlB,KAAAA,GAEAgB,QAAAC,IAAA5C,OAGAc,WAAA,KACAhB,SAAAC,cAAA,kBACAM,iBAAA,QAAAwC,IACA,MAAAuC,EAAAvC,EAAAE,OAAAsC,MAAAJ,OAEA,GAAA,KAAAG,GAAAA,EAAAE,OAAA,EAAAC,cAAA,oBAAA,OACA,CACA,MAAAC,EAAA1F,SAAAC,cAAA,iBACAyF,GAAAA,EAAA7B,SAEA3D,KAAAC,cAAAmF,KAIArE,UAAA,KACA,MAAA0E,EAAA3F,SAAAC,cAAA,UACA0F,EAAApF,iBAAA,QAAAwC,IACA,MAAA6C,EAAA,IAAAC,KAAA9C,EAAAE,OAAAsC,OAAAO,YACA,CAAA,EAAA,GAAAvB,SAAAqB,IACA7C,EAAAkB,iBACA0B,EAAAJ,MAAA,GACAE,cAAA,yCAAA,IAGAvF,KAAAE,MAAAuF,EAAAJ,SAMApE,6BAAA,KACA,MAAAwE,EAAA3F,SAAAC,cAAA,UAEA8F,EAAA,IAAAF,KACAG,EAAAD,EAAAE,cACAC,EAAAH,EAAAI,WAAA,EAGAC,EAAA,GAAAJ,KAAAE,EAAA,GAAA,IAAAA,EAAAA,KAFAH,EAAAM,UAAA,IAIAV,EAAAW,IAAAF,GAGAlF,SAAA,KACAlB,SAAAC,cAAA,SACAM,iBAAA,QAAAwC,IACA,MAAA7B,EAAA6B,EAAAE,OAAAsC,MACAlF,EAAAa,EAAAgE,MAAA,KAEA7E,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAoF,cAAA,sBAAA,GACAvF,KAAAG,KAAAa,KAIAuE,cAAA,CAAAc,EAAAC,EAAA,QAEA,GADAxG,SAAAC,cAAA,iBACA,OAGA,MAAAwG,EAAAzG,SAAAC,cAAA,eACAyF,EAAA1F,SAAAiC,cAAA,KACAyD,EAAAtD,YAAAmE,EACAC,EAAAd,EAAArD,UAAAC,IAAA,gBACAoD,EAAA7B,SACA4C,EAAA9D,YAAA+C,GAEAgB,WAAA,KACAhB,EAAA7B,OAAA,iBACA","file":"bundle.js","sourcesContent":["let pagina = 1;\r\nconst contenedorServicios = document.querySelector('.contenedor-servicios');\r\n\r\nconst cita = {\r\n    nombreCliente: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    iniciarFunciones();\r\n});\r\n\r\nconst iniciarFunciones = () => {\r\n    mostrarServicios();\r\n    mostrarSeccion();\r\n    cambiarSeccion();\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n    botonesPaginador();\r\n    mostrarResumen();\r\n    nombreCita();\r\n    fechaCita();\r\n    horaCita();\r\n    DeshabilitarFechasAnteriores();\r\n};\r\n\r\nconst mostrarServicios = () => {\r\n    fetch('../../servicios.json')\r\n    .then(res => res ? Promise.resolve(res) : Promise.reject(res))\r\n    .then(res => res.json())\r\n    .then(res => res.servicios.forEach(serv => {\r\n        const {id, nombre, precio} = serv;\r\n\r\n        const servicio = document.createElement('DIV');\r\n        const titulo = document.createElement('H4');\r\n        const costo = document.createElement('P');\r\n\r\n        titulo.textContent = nombre;\r\n        costo.textContent = ` $ ${precio}`;\r\n\r\n        servicio.classList.add('servicios');\r\n        servicio.dataset.idServicio = id;\r\n        titulo.classList.add('titulo__servicios');\r\n        costo.classList.add('precio__servicios');\r\n\r\n        servicio.onclick = seleccionarServicio;\r\n\r\n\r\n\r\n        servicio.appendChild(titulo);\r\n        servicio.appendChild(costo);\r\n\r\n        contenedorServicios.appendChild(servicio);\r\n\r\n\r\n    }))\r\n    .catch(res => console.log(res));\r\n};\r\n\r\nconst seleccionarServicio = (e) => {\r\n    let elemento;\r\n\r\n    if(e.target.tagName === 'P' || e.target.tagName === 'H4') elemento = e.target.parentElement;\r\n    else elemento = e.target;\r\n\r\n    elemento.classList.toggle('seleccionado');\r\n\r\n    if(elemento.classList.contains('seleccionado')){{\r\n        const servicioObj = {\r\n            id: parseInt(elemento.dataset.idServicio),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.lastElementChild.textContent\r\n        }\r\n        /* console.log(servicioObj) */\r\n        agregarServicio(servicioObj);\r\n    }}\r\n    else{\r\n        const id = parseInt(elemento.dataset.idServicio)\r\n\r\n        eliminarServicio(id)\r\n    }\r\n};\r\n\r\nconst mostrarSeccion = () => {\r\n\r\n    const seccionAnterior = document.querySelector('.mostrar-seccion')\r\n    //SI EXISTE EL ELEMENTO CON LA CLASE MOSTRAR-SECCION, ENTONCES ELMINA LA CLASE\r\n    if(seccionAnterior) seccionAnterior.classList.remove('mostrar-seccion');\r\n    \r\n\r\n    const paginaActual = document.querySelector(`#paso${pagina}`);\r\n    paginaActual.classList.add('mostrar-seccion');\r\n\r\n    const tabActivo = document.querySelector('.navegacion button.activo')\r\n    //SI EXISTE EL ELEMENTO CON LA ACTIVO, ENTONCES ELMINA LA CLASE\r\n    if(tabActivo) tabActivo.classList.remove('activo');\r\n\r\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tab.classList.add('activo');\r\n};\r\n\r\nconst cambiarSeccion  = () => {\r\n    const enlaces = document.querySelectorAll('#nav button');\r\n    \r\n    enlaces.forEach(pag => {\r\n        pag.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            pagina = parseInt(e.target.dataset.paso);\r\n            console.log(pagina)\r\n            mostrarSeccion();\r\n\r\n\r\n            const paginaAnterior = document.querySelector('#anterior');\r\n            const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n            if(pagina === 1){\r\n                paginaAnterior.classList.add('ocultar');\r\n            }\r\n            else if(pagina === 3){\r\n                paginaSiguiente.classList.add('ocultar');\r\n                paginaAnterior.classList.remove('ocultar');\r\n            }\r\n            else{\r\n                paginaAnterior.classList.remove('ocultar');\r\n                paginaSiguiente.classList.remove('ocultar');\r\n            }\r\n        })\r\n    })\r\n};\r\n\r\nconst paginaSiguiente = () => {\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', (e) => {\r\n        pagina++;\r\n        console.log(pagina)\r\n        botonesPaginador();\r\n    })\r\n};\r\n\r\nconst paginaAnterior = () => {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', () => {\r\n        pagina--;\r\n        botonesPaginador();\r\n    })\r\n};\r\n\r\nconst botonesPaginador = () => {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    if(pagina === 1){\r\n        paginaAnterior.classList.add('ocultar');\r\n    }\r\n    else if(pagina === 2){\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n    else if(pagina === 3){\r\n        paginaSiguiente.classList.add('ocultar');\r\n        mostrarResumen()\r\n    }\r\n    \r\n\r\n    mostrarSeccion();\r\n};\r\n\r\n\r\nconst mostrarResumen = () => {\r\n    const {nombreCliente, fecha, hora, servicios} = cita\r\n    const contenedorTres = document.querySelector('#paso3')\r\n\r\n    contenedorTres.innerHTML = \"\"\r\n\r\n    if(Object.values(cita).includes('')){\r\n        const serviciosIncompletos = document.createElement('P')\r\n        serviciosIncompletos.textContent = 'Faltan datos por rellenar'\r\n        serviciosIncompletos.classList.add('datos')\r\n        contenedorTres.appendChild(serviciosIncompletos)\r\n    }\r\n    else{\r\n        const heading = document.createElement('H2')\r\n        const nombre = document.createElement('P')\r\n        const fechaCita = document.createElement('P')\r\n        const horaCita = document.createElement('P')\r\n        const servicioCita = document.createElement('DIV')\r\n        const headingServicios = document.createElement('H2')\r\n        const totalPagar = document.createElement('P')\r\n\r\n        heading.textContent = 'Resumen de Cita'\r\n        nombre.innerHTML = `Tú Nombre: <span> ${nombreCliente}</span>` \r\n        fechaCita.innerHTML = `La fecha solicitada es: <span>${fecha}</span>`\r\n        horaCita.innerHTML = `La hora solicitada es: <span>${hora}</span>`\r\n        headingServicios.textContent = `Resumen de tus Servicios`\r\n        let cantidad = 0;\r\n\r\n        servicios.forEach(e => {\r\n            const contenedorServicio = document.createElement('DIV')\r\n            contenedorServicio.classList.add('contenedor-servicio')\r\n            const nombreServicio = document.createElement('P')\r\n            const precioServicio = document.createElement('P')\r\n\r\n            nombreServicio.textContent = e.nombre\r\n            precioServicio.textContent = e.precio\r\n            precioServicio.classList.add('precio-js')\r\n            \r\n            const totalServicio = e.precio.split('$')\r\n\r\n            cantidad += parseInt(totalServicio[1].trim())\r\n\r\n            contenedorServicio.appendChild(nombreServicio)\r\n            contenedorServicio.appendChild(precioServicio)\r\n\r\n            servicioCita.appendChild(contenedorServicio)\r\n            totalPagar.innerHTML = `Total a Pagar: <span>${cantidad}</span>`\r\n        })\r\n        console.log(cantidad)\r\n        nombre.classList.add('resumen__datos')\r\n        fechaCita.classList.add('resumen__datos')\r\n        horaCita.classList.add('resumen__datos')\r\n        totalPagar.classList.add('pagar')\r\n        \r\n\r\n        contenedorTres.appendChild(heading)\r\n        contenedorTres.appendChild(nombre)\r\n        contenedorTres.appendChild(fechaCita)\r\n        contenedorTres.appendChild(horaCita)\r\n        contenedorTres.appendChild(headingServicios)\r\n        contenedorTres.appendChild(servicioCita)\r\n        contenedorTres.appendChild(totalPagar)\r\n    }\r\n};\r\n\r\nconst agregarServicio = (objeto) => {\r\n    const { servicios } = cita;\r\n\r\n    cita.servicios = [...servicios, objeto]\r\n\r\n    console.log(cita)\r\n};\r\n\r\nconst eliminarServicio = (id) => {\r\n    const {servicios} = cita\r\n    cita.servicios = servicios.filter(e => e.id !== id)\r\n\r\n    console.log(cita)\r\n};\r\n\r\nconst nombreCita = () => {\r\n    const nombre = document.querySelector('#nombreCliente')\r\n    nombre.addEventListener('input', (e) => {\r\n       const valor = e.target.value.trim();\r\n\r\n       if(valor === '' || valor.length < 2) mostrarAlerta('Nombre no valido', true);\r\n       else{\r\n           const alerta = document.querySelector('.nombre-error')\r\n           if(alerta) alerta.remove()\r\n        }\r\n        cita.nombreCliente = valor\r\n    });\r\n};\r\n\r\nconst fechaCita = () => {\r\n    const fechaInput = document.querySelector('#fecha')\r\n    fechaInput.addEventListener('input', (e) => {\r\n        const dia = new Date(e.target.value).getUTCDay();  \r\n        if([0, 6].includes(dia)){\r\n            e.preventDefault()\r\n            fechaInput.value = ''\r\n            mostrarAlerta('No se aceptan citas los fin de semana', true)\r\n        }\r\n        else {\r\n            cita.fecha = fechaInput.value\r\n        }\r\n    });\r\n};\r\n\r\n\r\nconst DeshabilitarFechasAnteriores = () => {\r\n    const fechaInput = document.querySelector('#fecha')\r\n\r\n    const fechaAhora = new Date();\r\n    const year = fechaAhora.getFullYear();\r\n    const mes = fechaAhora.getMonth() + 1;\r\n    const dia = fechaAhora.getDate() + 1;\r\n    //FORMATO QUE DESEO DD-MM-AAAA\r\n    const fechaDeshabilitar = `${year}-${mes < 10 ? `0${mes}` : mes}-${dia}`\r\n                                \r\n    fechaInput.min = fechaDeshabilitar\r\n}\r\n\r\nconst horaCita = () => {\r\n    const horaInput = document.querySelector('#hora');\r\n    horaInput.addEventListener('input', (e) => {\r\n        const horaCita = e.target.value\r\n        const hora = horaCita.split(':')\r\n\r\n        if(hora[0] < 9 || hora[0] > 18) mostrarAlerta('Hora no valida rey', true)\r\n        else cita.hora = horaCita\r\n    })\r\n}\r\n\r\nconst mostrarAlerta = (mensaje, error = null) => {\r\n    const alertaPrevia = document.querySelector('.nombre-error')\r\n    if(alertaPrevia) return;\r\n\r\n\r\n    const formulario = document.querySelector('.formulario')\r\n    const alerta = document.createElement('P');\r\n    alerta.textContent = mensaje;\r\n    if(error)alerta.classList.add('nombre-error')\r\n    else alerta.remove()\r\n    formulario.appendChild(alerta)\r\n\r\n    setTimeout(() => {\r\n        alerta.remove('nombre-error')   \r\n    }, 3000);\r\n};\r\n"]}