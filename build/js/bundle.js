let pagina=1;const contenedorServicios=document.querySelector(".contenedor-servicios"),cita={nombreCliente:"",fecha:"",hora:"",servicios:[]};document.addEventListener("DOMContentLoaded",()=>{iniciarFunciones()});const iniciarFunciones=()=>{mostrarServicios(),mostrarSeccion(),cambiarSeccion(),paginaSiguiente(),paginaAnterior(),botonesPaginador(),mostrarResumen(),nombreCita(),fechaCita(),horaCita(),DeshabilitarFechasAnteriores()},mostrarServicios=()=>{fetch("../../servicios.json").then(e=>e?Promise.resolve(e):Promise.reject(e)).then(e=>e.json()).then(e=>e.servicios.forEach(e=>{const{id:t,nombre:a,precio:o}=e,n=document.createElement("DIV"),r=document.createElement("H4"),c=document.createElement("P");r.textContent=a,c.textContent=" $ "+o,n.classList.add("servicios"),n.dataset.idServicio=t,r.classList.add("titulo__servicios"),c.classList.add("precio__servicios"),n.onclick=seleccionarServicio,n.appendChild(r),n.appendChild(c),contenedorServicios.appendChild(n)})).catch(e=>console.log(e))},seleccionarServicio=e=>{let t;if(t="P"===e.target.tagName||"H4"===e.target.tagName?e.target.parentElement:e.target,t.classList.toggle("seleccionado"),t.classList.contains("seleccionado")){const e={id:parseInt(t.dataset.idServicio),nombre:t.firstElementChild.textContent,precio:t.lastElementChild.textContent};agregarServicio(e)}else{const e=parseInt(t.dataset.idServicio);eliminarServicio(e)}},mostrarSeccion=()=>{const e=document.querySelector(".mostrar-seccion");e&&e.classList.remove("mostrar-seccion");document.querySelector("#paso"+pagina).classList.add("mostrar-seccion");const t=document.querySelector(".navegacion button.activo");t&&t.classList.remove("activo");document.querySelector(`[data-paso="${pagina}"]`).classList.add("activo")},cambiarSeccion=()=>{document.querySelectorAll("#nav button").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),pagina=parseInt(e.target.dataset.paso),console.log(pagina),mostrarSeccion();const t=document.querySelector("#anterior"),a=document.querySelector("#siguiente");1===pagina?t.classList.add("ocultar"):3===pagina?(a.classList.add("ocultar"),t.classList.remove("ocultar")):(t.classList.remove("ocultar"),a.classList.remove("ocultar"))})})},paginaSiguiente=()=>{document.querySelector("#siguiente").addEventListener("click",e=>{pagina++,console.log(pagina),botonesPaginador()})},paginaAnterior=()=>{document.querySelector("#anterior").addEventListener("click",()=>{pagina--,botonesPaginador()})},botonesPaginador=()=>{const e=document.querySelector("#anterior"),t=document.querySelector("#siguiente");1===pagina?e.classList.add("ocultar"):2===pagina?(e.classList.remove("ocultar"),t.classList.remove("ocultar")):3===pagina&&(t.classList.add("ocultar"),mostrarResumen()),mostrarSeccion()},mostrarResumen=()=>{const{nombreCliente:e,fecha:t,hora:a,servicios:o}=cita,n=document.querySelector("#paso3");if(n.innerHTML="",Object.values(cita).includes("")){const e=document.createElement("P");e.textContent="Faltan datos por rellenar",e.classList.add("datos"),n.appendChild(e)}else{const r=document.createElement("H2"),c=document.createElement("P"),i=document.createElement("P"),s=document.createElement("P"),l=document.createElement("DIV"),d=document.createElement("H2"),m=document.createElement("P");r.textContent="Resumen de Cita",c.innerHTML=`TÃº Nombre: <span> ${e}</span>`,i.innerHTML=`La fecha solicitada es: <span>${t}</span>`,s.innerHTML=`La hora solicitada es: <span>${a}</span>`,d.textContent="Resumen de tus Servicios";let u=0;o.forEach(e=>{const t=document.createElement("DIV");t.classList.add("contenedor-servicio");const a=document.createElement("P"),o=document.createElement("P");a.textContent=e.nombre,o.textContent=e.precio,o.classList.add("precio-js");const n=e.precio.split("$");u+=parseInt(n[1].trim()),t.appendChild(a),t.appendChild(o),l.appendChild(t),m.innerHTML=`Total a Pagar: <span>${u}</span>`}),console.log(u),c.classList.add("resumen__datos"),i.classList.add("resumen__datos"),s.classList.add("resumen__datos"),m.classList.add("pagar"),n.appendChild(r),n.appendChild(c),n.appendChild(i),n.appendChild(s),n.appendChild(d),n.appendChild(l),n.appendChild(m)}},agregarServicio=e=>{const{servicios:t}=cita;cita.servicios=[...t,e],console.log(cita)},eliminarServicio=e=>{const{servicios:t}=cita;cita.servicios=t.filter(t=>t.id!==e),console.log(cita)},nombreCita=()=>{document.querySelector("#nombreCliente").addEventListener("input",e=>{const t=e.target.value.trim();if(""===t||t.length<2)mostrarAlerta("Nombre no valido",!0);else{const e=document.querySelector(".nombre-error");e&&e.remove()}cita.nombreCliente=t})},fechaCita=()=>{const e=document.querySelector("#fecha");e.addEventListener("input",t=>{const a=new Date(t.target.value).getUTCDay();[0,6].includes(a)?(t.preventDefault(),e.value="",mostrarAlerta("No se aceptan citas los fin de semana",!0)):cita.fecha=e.value})},DeshabilitarFechasAnteriores=()=>{const e=document.querySelector("#fecha"),t=new Date,a=t.getFullYear(),o=t.getMonth()+1,n=`${a}-${o<10?"0"+o:o}-${t.getDate()+1}`;e.min=n},horaCita=()=>{document.querySelector("#hora").addEventListener("input",e=>{const t=e.target.value,a=t.split(":");a[0]<9||a[0]>18?mostrarAlerta("Hora no valida rey",!0):cita.hora=t})},mostrarAlerta=(e,t=null)=>{if(document.querySelector(".nombre-error"))return;const a=document.querySelector(".formulario"),o=document.createElement("P");o.textContent=e,t?o.classList.add("nombre-error"):o.remove(),a.appendChild(o),setTimeout(()=>{o.remove("nombre-error")},3e3)};
//# sourceMappingURL=bundle.js.map
